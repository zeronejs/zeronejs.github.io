"use strict";(self.webpackChunkzerone_docs=self.webpackChunkzerone_docs||[]).push([[743],{9066:(s,n,a)=>{a.r(n),a.d(n,{data:()=>l});const l={key:"v-4e449d82",path:"/zh/techniques/redis.html",title:"高速缓存",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"Redis",slug:"redis",children:[]}],filePathRelative:"zh/techniques/redis.md",git:{updatedTime:1635918093e3,contributors:[{name:"zzh948498",email:"35091020+zzh948498@users.noreply.github.com",commits:2},{name:"“张智皓”",email:"zhang948498@163.com",commits:1}]}}},6865:(s,n,a)=>{a.r(n),a.d(n,{default:()=>m});var l=a(6252);const p=(0,l._)("h1",{id:"高速缓存",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#高速缓存","aria-hidden":"true"},"#"),(0,l.Uk)(" 高速缓存")],-1),e={href:"https://redis.io",target:"_blank",rel:"noopener noreferrer"},o=(0,l.Uk)("Redis"),r=(0,l.Uk)(" 是一个高性能的key-value数据库"),D=(0,l._)("p",null,"Redis 的出现，很大程度补偿了memcached这类key/value存储的不足，在部分场合可以对关系数据库起到很好的补充作用。",-1),c={class:"custom-container tip"},t=(0,l._)("p",{class:"custom-container-title"},"提示",-1),i=(0,l.Uk)("您需要安装 "),y={href:"https://redis.io/download",target:"_blank",rel:"noopener noreferrer"},C=(0,l.Uk)("redis"),d=(0,l.Uk)(" ，或者有一个有效的redis地址"),u=(0,l.uE)('<h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h2><ul><li><strong>步骤1</strong>: 安装Zerone 提供的redis模块包</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">yarn add @zeronejs/redis</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><strong>步骤2</strong>: 将RedisModule导入根模块</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">RedisModule</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@zeronejs/redis&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">Module</span><span style="color:#D4D4D4;">({</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">imports:</span><span style="color:#D4D4D4;"> [</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">RedisModule</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">forRoot</span><span style="color:#D4D4D4;">(), </span><span style="color:#6A9955;">// forRoot 参数 除非给定配置对象，否则使用默认值</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;">// ... 其他模块</span></span>\n<span class="line"><span style="color:#D4D4D4;">    ]</span></span>\n<span class="line"><span style="color:#D4D4D4;">})</span></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">AppModule</span><span style="color:#D4D4D4;"> {}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><strong>步骤3</strong>: 在需要redis 的地方 依赖注入</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Inject</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@nestjs/common&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">REDIS_CLIENT</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Redis</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@zeronejs/redis&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">...</span></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">class</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">AppController</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">constructor</span><span style="color:#D4D4D4;">(</span></span>\n<span class="line"><span style="color:#D4D4D4;">        @</span><span style="color:#DCDCAA;">Inject</span><span style="color:#D4D4D4;">(</span><span style="color:#4FC1FF;">REDIS_CLIENT</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">private</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">readonly</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">redisClient</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Redis</span></span>\n<span class="line"><span style="color:#D4D4D4;">    ) {}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    @</span><span style="color:#DCDCAA;">Get</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">async</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">getHello</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">await</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">redisClient</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">set</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;key&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;value&#39;</span><span style="color:#D4D4D4;">));</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#C586C0;">await</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">redisClient</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;key&#39;</span><span style="color:#D4D4D4;">));</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;hello&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"><span style="color:#D4D4D4;">...</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>',7),b={},m=(0,a(3744).Z)(b,[["render",function(s,n){const a=(0,l.up)("OutboundLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[p,(0,l._)("p",null,[(0,l._)("a",e,[o,(0,l.Wm)(a)]),r]),D,(0,l._)("div",c,[t,(0,l._)("p",null,[i,(0,l._)("a",y,[C,(0,l.Wm)(a)]),d])]),u],64)}]])},3744:(s,n)=>{n.Z=(s,n)=>{for(const[a,l]of n)s[a]=l;return s}}}]);